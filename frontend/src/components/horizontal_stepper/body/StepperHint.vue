<template>
	<div :class="`stepper-hint ${flag ? 'loaded' : ''}`">
		<svg
			xmlns="http://www.w3.org/2000/svg"
			width="200"
			viewBox="0 0 251.474 322.57"
			:class="`stepper-hint-icon ${flag ? 'loaded' : ''}`"
		>
			<g
				id="arab_character"
				data-name="arab character"
				transform="translate(0)"
			>
				<path
					id="Path_105"
					data-name="Path 105"
					d="M354.608,46.445l-18.765,6.944a9.676,9.676,0,0,0-3.254,16.139l16.06,15.031Z"
					transform="translate(-254.021 -21.103)"
					fill="#2e7be6"
				/>
				<path
					id="Path_106"
					data-name="Path 106"
					d="M339.089,80.537c.244,1.057.472,2.275.666,3.674l-3.713,64.711,55.869-2.031L390.235,68.1,353.505,54.548S332.8,53.183,339.089,80.537"
					transform="translate(-254.535 -21.741)"
					fill="#1553aa"
				/>
				<path
					id="Path_107"
					data-name="Path 107"
					d="M473.137,254.278l7.668,12.013,35.156,55.023V148.847a69.926,69.926,0,0,0-42.824,105.431"
					transform="translate(-264.487 -29.176)"
					fill="#fff"
				/>
				<path
					id="Path_108"
					data-name="Path 108"
					d="M267.459,350.672H499.034V136.54a103.717,103.717,0,0,0-16.519-1.32H358.587a103.086,103.086,0,0,0-24.894,3.029c-1.246.309-2.483.637-3.708.995a101.566,101.566,0,0,0-18.448,7.338c-15.928,8.221-29.288,22.587-29.288,22.587a124.217,124.217,0,0,0-20.962,31.718c-18.541,39.6-13.583,78.635-11.655,92.459a187.068,187.068,0,0,0,17.827,57.326"
					transform="translate(-247.56 -28.102)"
					fill="#fff"
				/>
				<rect
					id="Rectangle_63"
					data-name="Rectangle 63"
					width="160.227"
					height="4.875"
					transform="translate(130.306 285.56) rotate(-86.531)"
					fill="#2c2334"
				/>
				<path
					id="Path_109"
					data-name="Path 109"
					d="M395.928,161.063,439.2,128.247,415.172,47.894l-48.2,10.585Z"
					transform="translate(-256.974 -21.217)"
					fill="#f88f62"
				/>
				<path
					id="Path_110"
					data-name="Path 110"
					d="M390.638,141.167l2.812-1.592,7.559,19.493-1.554-22.892,33.736-19.1,9.143,22.551-44.54,26.886Z"
					transform="translate(-258.84 -26.672)"
					fill="#fff"
				/>
				<path
					id="Path_111"
					data-name="Path 111"
					d="M351.307,52.06v1.221a30.212,30.212,0,0,0,.723,6.082,31.771,31.771,0,0,0,34.526,24.7c1.072-.124,2.144-.324,3.216-.548a31.291,31.291,0,0,0,5.111-1.6,31.692,31.692,0,1,0-29.142-55.965L364.1,27.106l-.25.174a31.742,31.742,0,0,0-12.494,24.777Z"
					transform="translate(-255.739 -19.086)"
					fill="#ffa669"
				/>
				<path
					id="Path_112"
					data-name="Path 112"
					d="M351.171,93.126a7.914,7.914,0,0,0,.05,1.1c.574,8.9,9.6,15.829,18.422,13.885l24.38-5.334.847-18.373,1.471-32.133-4.537.224L351.3,54.536v1.222Z"
					transform="translate(-255.728 -21.562)"
					fill="#ffa669"
				/>
				<path
					id="Path_113"
					data-name="Path 113"
					d="M351.171,91.087a7.914,7.914,0,0,0,.05,1.1c4.836,6.731,11.143,10.569,19.27,7.678,7.8-2.767,12.839-8.576,16.054-15.357,5.609-11.841,5.685-26.723,5.261-34.053-.125-2.817-.349-4.512-.349-4.512L365.729,26.4l-1.645,1.147-.249.174A31.741,31.741,0,0,0,351.34,52.494l-.045,0v1.222Z"
					transform="translate(-255.728 -19.522)"
					fill="#ffa669"
				/>
				<path
					id="Path_114"
					data-name="Path 114"
					d="M362.026,107.511h0a1.245,1.245,0,0,0,1.245-1.244v-3.657a1.244,1.244,0,1,0-2.489,0v3.657a1.245,1.245,0,0,0,1.244,1.244"
					transform="translate(-256.486 -25.433)"
					fill="#2c2334"
				/>
				<path
					id="Path_115"
					data-name="Path 115"
					d="M373.753,90.663a35.859,35.859,0,0,0-12.724.4c-2.6.578-6.266,1.735-7.023.519a1.667,1.667,0,0,1,.064-1.4c.788-2.075,3.692-2.735,5.065-3.047,5.779-1.312,12.567,2.346,14.619,3.524"
					transform="translate(-255.941 -24.289)"
					fill="#2c2334"
				/>
				<path
					id="Path_116"
					data-name="Path 116"
					d="M361.307,98.388c4.275.158,9.284-5.074,9.285-5.075a28.653,28.653,0,0,1-12.663,1.006,27.11,27.11,0,0,1-3.224-.691c2.593,3.715,4.864,4.7,6.6,4.76"
					transform="translate(-256.007 -24.798)"
					fill="#2c2334"
				/>
				<path
					id="Path_117"
					data-name="Path 117"
					d="M351.7,46.349h24.311c9.943-.14,10.6,15.429,22.988,20.837a46.481,46.481,0,0,0,22.55,3.9l-7.574-25.309A31.694,31.694,0,0,0,376.226,21.6,32.148,32.148,0,0,0,351.7,46.349"
					transform="translate(-255.77 -19.086)"
					fill="#2c2334"
				/>
				<path
					id="Path_118"
					data-name="Path 118"
					d="M381.443,110.3l18.842-4.138-15.852,14.73Z"
					transform="translate(-258.115 -25.811)"
					fill="#2c2334"
				/>
				<path
					id="Path_119"
					data-name="Path 119"
					d="M395.138,70.6a10.39,10.39,0,1,0,7.919-12.376A10.389,10.389,0,0,0,395.138,70.6"
					transform="translate(-259.175 -22.012)"
					fill="#ffa669"
				/>
				<path
					id="Path_120"
					data-name="Path 120"
					d="M354.993,85.1h4.756V83.413h-3.065V76.121h-1.691Z"
					transform="translate(-256.029 -23.442)"
					fill="#2c2334"
				/>
				<path
					id="Path_121"
					data-name="Path 121"
					d="M360.36,66.872a11.261,11.261,0,0,1,7.722-3.341c4.195-.135,8.336,1.919,8.134,2.883-.246,1.174-8.051.86-11.845.709-1.658-.066-3.039-.169-4.011-.251"
					transform="translate(-256.453 -22.449)"
					fill="#2c2334"
				/>
				<path
					id="Path_122"
					data-name="Path 122"
					d="M362.585,69.956a13.508,13.508,0,0,0,.111,6.191c.523,1.606,1.438,2.431,2.377,2.453a2.588,2.588,0,0,0,1.825-1.077c2.059-2.344,1.452-6.133,1.217-7.326a5.308,5.308,0,0,0-3.059-.921,5.239,5.239,0,0,0-2.47.68"
					transform="translate(-256.603 -22.903)"
					fill="#2c2334"
				/>
				<path
					id="Path_123"
					data-name="Path 123"
					d="M372,72.191l.343,1.1,21.284-7.714.5-1.24Z"
					transform="translate(-257.37 -22.513)"
					fill="none"
				/>
				<path
					id="Path_124"
					data-name="Path 124"
					d="M358.022,73.537c-.012-5.219,3.153-9.472,7.053-9.482s7.084,4.231,7.1,9.45-3.152,9.472-7.053,9.482-7.084-4.231-7.1-9.45m1.415,0c.01,4.44,2.557,8.045,5.678,8.038s5.651-3.624,5.641-8.064-2.556-8.045-5.678-8.038-5.651,3.624-5.641,8.064"
					transform="translate(-256.268 -22.491)"
					fill="#fff"
				/>
				<path
					id="Path_125"
					data-name="Path 125"
					d="M342.928,73.579c-.012-5.234,2.08-9.339,4.761-9.344s4.789,4.089,4.8,9.322-2.078,9.339-4.759,9.344-4.791-4.088-4.8-9.322m1.151,0c.011,4.9,1.9,8.179,3.65,8.175s3.622-3.3,3.611-8.192-1.895-8.179-3.648-8.175-3.624,3.3-3.613,8.192"
					transform="translate(-255.078 -22.505)"
					fill="#fff"
				/>
				<rect
					id="Rectangle_66"
					data-name="Rectangle 66"
					width="5.126"
					height="1.151"
					transform="matrix(1, -0.002, 0.002, 1, 96.835, 50.478)"
					fill="#fff"
				/>
				<path
					id="Path_126"
					data-name="Path 126"
					d="M418.2,52.411H349.933s-2.257-33.477,31.9-33.477c33.319,0,36.367,33.477,36.367,33.477"
					transform="translate(-255.628 -18.934)"
					fill="#2e7be6"
				/>
				<path
					id="Path_127"
					data-name="Path 127"
					d="M383.982,53.757S366.83,63.9,356.265,63.9s-6.422-10.666-6.422-10.666Z"
					transform="translate(-255.56 -21.638)"
					fill="#2e7be6"
				/>
				<path
					id="Path_128"
					data-name="Path 128"
					d="M389.61,55.275a23.061,23.061,0,0,1,5.368,1.418,21.943,21.943,0,0,1,4.107,2.115c.182.119.365.241.543.375a16.222,16.222,0,0,1,6.953,12.454,26.051,26.051,0,0,1-.427,6.83c-.09.494-.2,1-.318,1.52-.256,1.106-.575,2.265-.967,3.474-2.555,7.888-.364,23.851,4.013,42.46.231.99.47,1.992.719,3,1.55,6.376,3.34,13.018,5.259,19.723q.319,1.123.65,2.258c11.408,39.289,27.023,79.84,27.023,79.84s.641-30.748,18.413-45.643c5.939-4.975,13.792-8.183,24.177-7.878,10.874.319,19.018-1.628,25.111-4.845V126.837c-21.411-10.325-57.365-30.2-78.39-55.741a86.419,86.419,0,0,1-10.514-15.822Z"
					transform="translate(-258.759 -21.799)"
					fill="#2e7be6"
				/>
				<path
					id="Path_129"
					data-name="Path 129"
					d="M412.573,46.445l18.765,6.944a9.675,9.675,0,0,1,3.254,16.139l-16.06,15.031Z"
					transform="translate(-260.569 -21.103)"
					fill="#2e7be6"
				/>
				<path
					id="Path_130"
					data-name="Path 130"
					d="M350.154,51.349H414.19a5.364,5.364,0,1,0,0-10.728H350.154a5.364,5.364,0,0,0,0,10.728"
					transform="translate(-255.225 -20.644)"
					fill="#2c2334"
				/>
				<path
					id="Path_131"
					data-name="Path 131"
					d="M285.218,165.349s14.946,6.013,25.917,23.291,18.389,52.416,18.389,52.416S340.8,121.4,335.748,86.749c-9.394,18.968-21.779,41.153-30.945,47.443-16.855,11.573-19.585,31.157-19.585,31.157"
					transform="translate(-250.529 -24.28)"
					fill="#2e7be6"
				/>
			</g>
		</svg>
		<div
			:class="`stepper-hint-message background pa-2 ${flag ? 'loaded' : ''}`"
		>
			<div
				v-for="(item, i) in items"
				:key="i"
				:class="`stepper-hint-content ${
					i == activeHint
						? 'active'
						: i < activeHint
						? 'before'
						: i > activeHint
						? 'after'
						: ''
				}`"
				v-html="item"
			></div>
			<div
				class="stepper-hint-message-indicators d-flex"
				v-if="items ? items.length > 1 : false"
			>
				<div
					v-for="(item, i) in items"
					:key="i"
					:class="`stepper-hint-message-indicator cursor-pointer ${
						i == activeHint ? 'active' : ''
					}`"
					@click="changeTo(i)"
				></div>
			</div>
			<div class="stepper-hint-message-actions">
				<v-btn x-small text color="primary" @click="$emit('close')">{{
					$tr("skip")
				}}</v-btn>
				<v-btn
					class="hint-next"
					color="primary"
					fab
					x-small
					dark
					style="height: 20px; width: 20px"
					@click="nextHint"
				>
					<v-icon size="14">mdi-play</v-icon>
				</v-btn>
			</div>
		</div>
	</div>
</template>
<script>
export default {
	props: {
		show: {
			type: Boolean,
		},
		items: {
			type: Array,
		},
	},
	data() {
		return {
			flag: true,
			activeHint: 0,
		};
	},
	methods: {
		nextHint() {
			if (this.activeHint < this.items.length - 1) {
				this.activeHint++;
			}
		},
		changeTo(index) {
			this.activeHint = index;
		},
	},
	watch: {
		show(value) {
			this.flag = value;
			if (value === false) {
				setTimeout(() => {
					this.activeHint = 0;
				}, 400);
			}
		},
	},
};
</script>
<style scoped>
.stepper-hint {
	position: absolute;
	bottom: 0;
	right: 0;
	z-index: 100;
}
.v-application--is-rtl .stepper-hint {
	right: unset;
	left: 0;
}
.stepper-hint-icon {
	position: absolute;
	bottom: 0;
	right: 0;
	transform: translateX(100%);
	transition: all 0.5s;
}
.v-application--is-rtl .stepper-hint-icon {
	right: unset;
	left: 0;
	transform: translateX(-100%) scaleX(-1);
}
.stepper-hint-icon.loaded {
	transform: translateX(0);
}
.v-application--is-rtl .stepper-hint-icon.loaded {
	transform: translateX(0) scaleX(-1);
}
.stepper-hint-message {
	height: 96px;
	width: 230px;
	position: absolute;
	bottom: -100px;
	right: 174px;
	border-radius: 12px;
	transition: all 0.5s;
	overflow: hidden;
}
.v-application--is-rtl .stepper-hint-message {
	right: unset;
	left: 174px;
}
.stepper-hint-message.loaded {
	bottom: 160px;
}
.stepper-hint-message {
	font-size: 12px;
	color: #777;
	line-height: 1.4;
}
.stepper-hint-content {
	position: absolute;
	top: 16px;
	left: 16px;
	right: 16px;
	transition: all 0.4s;
}
.stepper-hint-content.active {
	transform: translateX(0);
}
.stepper-hint-content.before {
	transform: translateX(-110%);
}
.stepper-hint-content.after {
	transform: translateX(110%);
}
.v-application--is-rtl .stepper-hint-content.before {
	transform: translateX(110%);
}
.v-application--is-rtl .stepper-hint-content.after {
	transform: translateX(-110%);
}
.stepper-hint-message p {
	margin: 0 !important;
}
.stepper-hint-message-indicators {
	position: absolute;
	bottom: 12px;
	left: 16px;
}
.v-application--is-rtl .stepper-hint-message-indicators {
	left: unset;
	right: 16px;
}
.stepper-hint-message-indicator {
	height: 6px;
	width: 6px;
	border-radius: 50%;
	margin: 2px;
	background: var(--gray);
	transition: all 0.4s;
}
.stepper-hint-message-indicator.active {
	background: var(--v-primary-base);
	transform: scale(1.05);
}
.stepper-hint-message-actions {
	position: absolute;
	bottom: 8px;
	right: 10px;
}
.v-application--is-rtl .stepper-hint-message-actions {
	right: unset;
	left: 10px;
}
.stepper-hint::after {
	display: block;
	content: "";
	position: absolute;
	right: 162px;
	border-left: 12px solid var(--v-background-base);
	border-bottom: 20px solid transparent;
	height: 20px;
	width: 12px;
	bottom: -100px;
	transition: all 0.5s;
}
.v-application--is-rtl .stepper-hint::after {
	right: unset;
	left: 162px;
	border-right: 12px solid var(--v-background-base);
	border-left: 0;
}
.stepper-hint.loaded::after {
	bottom: 196px;
}
.v-application--is-rtl .hint-next {
	transform: scaleX(-1);
}
</style>
